<!DOCTYPE html>
<html lang="en">

<head>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q11D0YHHSV');
</script>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Ivy Tutors Academy</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <link href="assets/img/favicon.ico" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Poppins:300,400,500,700" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/css/style.css" rel="stylesheet">
  <script src="/assets/js/jQuery_local.js"></script>

  <script>
    const startTime = new Date('Thu Sep 01 2022 (Eastern Daylight Time)')
    const endTime = new Date('Fri Sep 02 2022 (Eastern Daylight Time)')

    const sheetId = '10G5Uq7SmKaecovprszSjS_2iPaGg0ZDg8gT1KDAHLCY';
    const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?`;
    const sheetName = 'ParticipantIDs';
    const query = encodeURIComponent('Select *')
    const url = `${base}&sheet=${sheetName}&tq=${query}`
    const data = []
    const init = new Promise((resolve, reject) => {
      fetch(url)
        .then(res => res.text())
        .then(rep => {
            const jsonData = JSON.parse(rep.substring(47).slice(0, -2));
            const rowNum = jsonData.table.rows.length;
            for(let i = 0; i < rowNum; i++)
            {
              data.push(jsonData.table.rows[i].c[2].v)
            }
            resolve(data);
        }
        )
    })


    window.addEventListener('load', function () {
      sessionStorage.clear();

      if (new Date() < startTime || new Date() > endTime)
      {
        document.getElementById('time').innerText = startTime.toString().split(" ").splice(0,4).join(' ') + " to " + endTime.toString().split(" ").splice(0,4).join(' ');
        document.getElementById('time').style = "text-align:center"
        $(document).ready(function(){
          $("#errorModal").modal('show');
        });
      }

      init.then(() => {
        document.getElementById('btn-form').addEventListener('click', function () {
        input = document.getElementById('formID').value;
        try {
          if(data.indexOf(parseInt(input)) != -1)
          {
            sessionStorage.userID = document.getElementById('formID').value
            document.getElementById('formID').value = ""
            window.location.href = "/problems/0.html"
          } else {
            sessionStorage.userID = ""
            document.getElementById('response').style = "color: red"
            document.getElementById('response').hidden = false
            document.getElementById('response').innerHTML = "Invalid participant ID. Try again."
            setTimeout(() => {
              document.getElementById('response').hidden = true
            }, 5000)
          }
        } catch (e) {
          sessionStorage.userID = ""
          document.getElementById('response').style = "color: red"
          document.getElementById('response').hidden = false
          document.getElementById('response').innerHTML = "Invalid participant ID. Try again."
          setTimeout(() => {
            document.getElementById('response').hidden = true
          }, 5000)
        }
      })
    })
    })
  </script>
</head>

<body>
  <header id="header" class="fixed-top d-flex align-items-center header-transparent">
    <div class="container d-flex justify-content-between align-items-center">
      <div id="logo">
        <img src="assets/img/logo.png" alt="">
      </div>
    </div>
  </header>

  <section id="hero">
    <div class="hero-container" data-aos="zoom-in" data-aos-delay="100">
      <h1>Input Credentials</h1>
      <h2>Input your ID number below</h2>
      <input class="form-control" type="text" placeholder="Participant ID" style="width:20%" id="formID">
      <button class="btn-get-started" type="submit" id="btn-form" style="color:black">Enter</button>
      <p id="response"></p>
     </div>
  </section>

  <div class="modal fade" id="errorModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="errorModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="errorModalTitle">Contest Site Not Open! ðŸ”’</h5>
          </button>
        </div>
        <div class="modal-body">
          <p>
            This is the location of the contest site where you will apply the knowledge you've learned during our program. This portal will be accessible from
          </p>
          <p id="time"></p>
          <p>Top performing competitors will be offered certificates, awards, and/or recommendation letters. Be sure to study well!</p>
          <p style="font-size:smaller;">Times are in EST. Portal opens at 12:01am EST on first day and closes at 11:59pm EST on last day.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="assets/vendor/purecounter/purecounter.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/js/main.js"></script>
</body>

</html>